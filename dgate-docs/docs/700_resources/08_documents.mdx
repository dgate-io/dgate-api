---
id: documents
title: Documents
---

Documents are key-value data stored in collections. They can be accessed and manipulated using the Admin API or from within modules.

## Document Structure

```json
{
    "id": "document1",
    "namespace": "namespace1",
    "collection": "collection1",
    "data": {
        "field1": "value1",
        "field2": "value2"
    },
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
}
```

## Document Fields

### `id!`

The unique identifier of the document within its collection.

### `namespace!`

The namespace that the document belongs to.

### `collection!`

The collection that the document belongs to.

### `data!`

The data of the document. This can be any JSON-serializable data, including strings, numbers, booleans, arrays, and objects.

### `created_at`

The time the document was created. (read-only, auto-generated)

### `updated_at`

The time the document was last updated. (read-only, auto-updated)

## Examples

### Create a Document via Admin API

```bash
curl -X PUT http://localhost:9080/api/v1/document/default/users/user-123 \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "name": "John Doe",
      "email": "john@example.com",
      "active": true
    }
  }'
```

### Get a Document

```bash
curl http://localhost:9080/api/v1/document/default/users/user-123
```

### List Documents in a Collection

```bash
curl 'http://localhost:9080/api/v1/document?namespace=default&collection=users'
```

### Delete a Document

```bash
curl -X DELETE http://localhost:9080/api/v1/document/default/users/user-123
```

## Accessing Documents from Modules

Modules can interact with documents using the context methods:

```javascript
function requestHandler(ctx) {
    // Get a document
    var doc = ctx.getDocument("users", "user-123");
    if (doc && doc.data) {
        ctx.json(doc.data);
        return;
    }
    
    // Create or update a document
    ctx.setDocument("users", "user-456", {
        name: "Jane Doe",
        email: "jane@example.com"
    });
    
    // Delete a document
    ctx.deleteDocument("users", "old-user");
    
    ctx.json({ success: true });
}
```

Note: Modules can only access documents in collections that are accessible based on the collection's visibility rules:
- **Private collections**: Only modules in the same namespace can access
- **Public collections**: Modules from any namespace can access
