version: v1
log_level: debug

storage:
  type: memory

proxy:
  port: ${DGATE_PORT:-8080}
  host: 0.0.0.0
  
  init_resources:
    namespaces:
      - name: "test"
    
    services:
      - name: "ws-upstream"
        namespace: "test"
        urls:
          - "http://127.0.0.1:${TEST_SERVER_PORT:-19999}"
    
    routes:
      - name: "ws-route"
        paths: ["/ws/**"]
        methods: ["GET"]
        namespace: "test"
        service: "ws-upstream"
        strip_path: true
    
    domains:
      - name: "default-domain"
        namespace: "test"
        patterns: ["*"]

admin:
  port: ${DGATE_ADMIN_PORT:-9080}
  host: 0.0.0.0
